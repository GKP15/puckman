<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

    <head>
        <meta charset="UTF-8" />
        <title>Pucman</title>
        <link rel="stylesheet" href="styles.css">
        <script src="lib/jquery.js"></script>
        <script src="lib/phaser.js"></script>
        <script src="lib/osmtogeojson.js"></script>
        <script src="src/TextField.js"></script>
        <script src="src/MainMenu.js"></script>
        <script src="lib/cytoscape.js"></script>
        <script src="src/Load.js"></script>
        <script src="src/Game.js"></script>
        <script src="src/Graph.js"></script>
        <script src="src/Character.js"></script>
        <script src="src/Interface.js"></script>
        <script src="src/Dbquery.js"></script>
        <script src="http://openlayers.org/api/2.11/OpenLayers.js"></script>
        <script src="http://mapstraction.com/mxn/build/latest/mxn.js?(openlayers,[geocoder])" type="text/javascript"></script>
    </head>

    <body>
        <div id="map"></div>
        <div id="gameContainer"></div>
        <script type="text/javascript">
window.onload = function() {
    map = new mxn.Mapstraction('map', 'openlayers');
    var latlon = new mxn.LatLonPoint(51.3365278, 12.3764688);
    map.setCenterAndZoom(latlon, 16);
    map.setOption('enableDragging', true);
    map.addControls('pan', true);

    var bbox = "(" +
        map.getBounds().sw.lat + "," + map.getBounds().sw.lon + "," +
        map.getBounds().ne.lat + "," + map.getBounds().ne.lon + ");";
    var apiUrlBase = 
        "http://overpass-api.de/api/interpreter?data=[out:json];";
    var apiUrlData =  
        "(node[place = 'city']" + bbox +  
        "node[place = 'borough']" + bbox +  
        "node[place = 'suburb']" + bbox +  
        "node[place = 'quarter']" + bbox +  
        "node[place = 'neighbourhood']" + bbox + ");" +
        "out body; >; out skel qt;";
    var getLocations = Pucman.Graph.getGeoData( apiUrlBase, apiUrlData); 

    //map.click.addHandler(function(eventName, eventSource, eventArgs) {
        document.getElementById("gameContainer").style.zIndex = "200";
        var game = new Phaser.Game(
                "100", "100", Phaser.AUTO, 'gameContainer', null, true, false);
        game.state.add('MainMenu', Pucman.MainMenu);
        game.state.add('Load', Pucman.Load);
        game.state.add('Game', Pucman.Game);
        game.state.start('MainMenu', true, false, map);
        //game.state.start('Load', true, false, map);
    //});
};
        </script>
    </body>
</html>
